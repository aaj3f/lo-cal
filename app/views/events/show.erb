<% if @no_event %>
<!-- This will happen if there is no event with the id supplied to the controller -->
<h1>Ruh-roh! We can't find any such event!</h1>
<h3><a href="/events">Click Here</a> to return to our index of upcoming events!</h3>
<% else %>
<!-- Otherwise, this will be the successful view -->
<h1><%= @event.name %></h1>
<h3><%= @event.display_date_and_time %></h3>
<h4><%= @event.display_organizer %></h4>
<h4>Located at <%= @event.location %></h4>
<br>
<!-- Want to add some control logic so that if someone has already RSVPd for this event, it shows a different form -->
<% if current_user.events.include?(@event) %>
<% response = Rsvp.find_by(user_id: current_user.id, event_id: @event.id).status %>
<div class="form-div">
<form class="update-and-delete" action="/rsvps/<%= @event.id %>" method="post">
  <input type="hidden" id="hidden" name="_method" value="patch">
  You've successfully RSVP'd to this event!<br>
  Do you want to update your RSVP for this event?<br>
  <input type="radio" name="rsvp" value="accept" <%= "checked" if response == "accept" %>><span> I'm going!    </span>

  <input type="radio" name="rsvp" value="interested" <%= "checked" if response == "interested" %>><span> I'm interested.    </span>

  <input type="radio" name="rsvp" value="decline" <%= "checked" if response == "decline" %>><span> I can't make it.    </span>
  <input type="submit" value="Update my RSVP!">
</form>
<span> ...or... </span>
<form class="update-and-delete" action="/rsvps/<%= @event.id %>" method="post">
  <input type="hidden" id="hidden" name="_method" value="delete">
  <input type="submit" value="Delete my RSVP entirely!">
</form>
</div>
<% else %>
<div class="form-div">
<form action="/rsvps" method="post">
  <input type="hidden" id="hidden" name="event" value="<%= @event.id %>">
  <button class="btn btn-primary mx-1 my-1 col-sm-auto" type="submit" name="rsvp" value="accept">I'm going!</button>

  <button class="btn btn-primary mx-1 my-1 col-sm-auto" type="submit" name="rsvp" value="interested">I'm interested.</button>

  <button class="btn btn-primary mx-1 my-1 col-sm-auto" type="submit" name="rsvp" value="decline">I can't make it.</button>
</form>
</div>
<% end %>

<br>
<p><%= @event.description&.gsub("\n", "<br>") %></p>
<br>
<p><%= "Visit <a href=\"#{@event.event_url}\" target=\"_blank\">#{@event.name}</a> for more information about this event." %></p>
<% end %>
